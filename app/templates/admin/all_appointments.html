{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto space-y-10">
    <div>
        <span class="text-[10px] font-black text-indigo-500 uppercase tracking-[0.3em] mb-2 block">Administração</span>
        <h1 class="text-4xl font-black text-slate-900 tracking-tight italic">
            Agenda <span class="text-indigo-600">Global</span>
        </h1>
    </div>

    <div class="bg-white/70 backdrop-blur-xl rounded-[2.5rem] shadow-xl border border-white overflow-hidden">
        <table class="w-full text-left border-collapse">
            <thead>
                <tr class="bg-slate-50/50 border-b border-slate-100">
                    <th class="px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">Cliente</th>
                    <th class="px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">Serviço</th>
                    <th class="px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">Data/Hora</th>
                    <th class="px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">Ações</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-50">
                {% for appt in appointments %}
                <tr class="hover:bg-slate-50/80 transition-all">
                  <td class="px-8 py-6 font-bold text-slate-900 capitalize">
                        {{ appt.user.username if appt.user else "Removido" }}
                  </td>
                  <td class="px-8 py-6 text-sm text-slate-600 font-semibold">{{ appt.service.name }}</td>
                  <td class="px-8 py-6 text-sm text-slate-500">
                      {{ appt.start_datetime.strftime('%d/%m/%Y - %H:%M') }}
                  </td>
                  <td class="px-8 py-6">
                      <form action="{{ url_for('admin.delete_appointment', id=appt.id) }}" method="POST" onsubmit="return confirm('Remover agendamento?')">
                          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                          <button type="submit" class="text-red-400 font-bold text-[10px] uppercase hover:text-red-600">Excluir</button>
                      </form>
                  </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}